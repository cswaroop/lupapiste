$matti-grid-margin: 10px;

@mixin matti-column ($size, $columns) {
  position: relative;
  float: left;
  @include column-width($size * (100% / $columns));
  min-height: 1px; // Enforce rendering of empty column.
  padding-left: $matti-grid-margin;

  label.required:after {
    content: " *";
    color: $label-required-star-color;
  }

  .col--vertical, .col--horizontal {
    box-sizing: border-box;
  }
  .col--vertical {
    label {
      text-align: left;
      display: block;
    }
  }
}


@mixin matti-grid ($columns) {
  .matti-grid-#{$columns} {
    width: 100%;
    color: $gray51;
    > .row {
      @include clearfix;
      padding: $matti-grid-margin 0;
      @for $i from 1 through $columns {
       > .col-#{$i} {
          @include matti-column($i, $columns);
          &:first-child {
            padding-left: 0;
          }
        }
      }
      .col--full > * {
        width: 100%;
      }
      .col--full > .col--vertical > * {
        width: 100%;
      }
      .col--right > * {
        float: right;
      }
      .col--left > * {
        float: left;
      }
      .col--center {
        text-align: center;
        > * {
          display: inline-block;
        }
      }
      &.row--tight {
        padding-top: $marginS;
        padding-bottom: $marginS;
        margin: 0 0 0 0;
      }
      &.row--indent {
        padding-left: $marginL;
        padding-top: 0;
      }
    }
  }
}

@for $i from 1 through 12 {
  @include matti-grid( $i );
}

.matti-list {
  > .item {
    display: inline-block;
  }
  > .item + .item {
    margin-left: $matti-grid-margin;
  }
  > .item.item--full {
    display: block;
  }
  .item--full > * {
    width: 100%;
  }
  .item--right > * {
    float: right;
  }
  .item--left > * {
    float: left;
  }
  .item--center {
    text-align: center;
    > * {
      display: inline-block;
    }
  }
}

.matti-list.list--sparse {
  > .item + .item {
    margin-left: 4 * $matti-grid-margin;
  }
}

// toggle-helper is defined in _inputs.scss
@include toggle-helper ( matti-checkbox, "e604", "e603",
                         $wrapper-display: inline-block ) {}
@include toggle-helper (matti-radio, "e635", "e634", $wrapper-display: block) {}

.matti-checkbox-wrapper {
  border: none;
  $margin-right: $marginS;
  $margin-bottom: $marginS;
}

.matti-radio-wrapper {
  border: none;
}

.matti-buttons {
    float: right;
    > button {
      margin-left: $marginS;
    }
}

$section-border: 1px solid $gray51;

.matti-section {
  div.section-header {
    padding-left: $marginM;
    padding-right: $marginM;
    border: $section-border;
    background-color: transparentize( $orange-dark, 0.6);
    .section-title {
      font-size: 17px;
      font-weight: bold;
    }
  }
  > .matti-buttons {
    margin-top: $marginS;
  }
  div.section-body {
    padding: {
      left: $marginM;
      right: $marginM;
    }
    border: {
      left: $section-border;
      right: $section-border;
      bottom: $section-border;
    }
  }
}

.matti-section + .matti-section {
  .section-header {
    border-top: none;
  }
}

.matti-verdict {
  .matti-section {
    min-height: 64px;
  }
}

.matti--view {
  .matti-condition-box + .matti-condition-box:before {
    content: ", ";
  }
}

span.formatted {
  white-space: pre-wrap;
  display: inline-block;
  &.warning {
    color: $negative;
  }
}

.matti-label {
  font-size: 15px;
  font-weight: bold;
}

// Meta status classes
.matti--edit {}
.matti--view {}

.row-text {
  line-height: $btn-height;
  display: inline-block;
  vertical-align: middle;
}

.row-text--margin {
  margin-right: $marginL;
}

div.verdict-template {
  span.pen-input--edit, span.pen-input--view {
    margin-left: $marginS;
  }
  span.header {
    font-size: 17px;
    font-weight: bold;
  }
}

span.saved-info {
  color: $gray153;
}

div.matti-date-delta {
  > div.delta-editor {
    white-space: nowrap;
    input.grid-style-input {
      max-width: 5em;
      margin-left: 0.5em;
      margin-right: 0.2em;
    }
  }}

.row.row--date-delta-title {
  margin: 0;
  padding-bottom: 0;
}

div.matti-template-list {
  .checkbox-wrapper {
    margin-top: $marginL;
  }
  table.matti-templates-table {
    // No-row-hover mixin is defined in _tables.scss
    @include no-row-hover;
    margin-top: $marginL;
  }

}

// Settings

div.matti-settings {
  h2.matti-settings-title {
    margin-top: 0;
  }
  .section-header {
    background-color: initial;
    border-bottom: none;
  }
  // .section-body {
  //   border: none;
  // }
}

// Reviews

div.matti-settings-editor {
  padding-top: $marginS;
  margin-bottom: $marginL;
  .checkbox-wrapper {
    margin-bottom: $marginS;
  }
  table.matti-editor-table {
    // No-row-hover mixin is defined in _tables.scss
    @include no-row-hover;
    margin-top: 0;
  }
}

// Verdicts

div.matti-verdict {
  div.matti-section {
    div.section-header {
      background-color: initial;
      border: none;
      border-top: 1px solid $gray221;
      padding: 0;
      div.verdict-buttons {
        padding-top: $marginS;
        position: absolute;
        right: 0;
        z-index: 888;
      }
    }
    div.section-body {
      border: none;
      padding: 0;
    }
  }
}


// Phrases

div.matti-phrases {
  margin-top: $marginL;
  table.matti-phrases-table {
    @include no-row-hover;
    margin-top: $marginL;
    th,
    th > div.like-btn {
      cursor: pointer;
      i.icon-placeholder {
        min-width: 22px;
      }
    }
    td.phrase {
      width: 100%;
      max-width: 0;
      text-overflow: ellipsis;
      overflow-x: hidden;
    }
  }
}

span.phrase-text {
  white-space: pre-wrap;
}

// Autocomplete

div.matti-autocomplete {
  position: relative;
  display: inline-block;
  // Without border-collapse fix, height would be 41px within tables
  // (e.g., attachment-batch-table)
  border-collapse: initial;
  .ac--combobox {
    display: table;
  }
  .ac--selected {
    min-height: 40px;
    max-height: 40px;
    line-height: 40px;
    display: table;
    table-layout: fixed;
    width: 100%;
    overflow-x: hidden;
    background-color: white;
    span {
      font-size: 15px;
      box-sizing: border-box;
      border: 1px solid $input-border-color;
      border-right: none;
      min-height: 40px;
      max-height: 40px;
      height: 40px;
      line-height: 38px;
      padding: {
        left: 12px;
      }
      min-width: 10em;
      width: 100%;
      overflow-x: hidden;
      text-overflow: ellipsis;
    }
    i {
      box-sizing: border-box;
      min-width: 22px;
      width: 32px;
    }
    i.ac--chevron {
      font-weight: bold;
      border: 1px solid $input-border-color;
      border-left: none;
    }
    i.ac--clear {
      padding-left: 12px;
    }
  }
  .ac--selected.disabled {
    //pointer-events: none;
    span, i {
      background-color: $input-disabled-background-color;
      border-color: $input-disabled-border-color;
    }
    i {
      color: $input-select-disabled-icon
    }
  }
  .ac__menu {
    background-color: white;
    position: absolute;
    left: 0;
    top: 100%;
    z-index: 888;
    min-width: 20em;
    width: 100%;
    border: 1px solid $orange-dark;
    div.ac__term {
      padding: 4px 4px 4px 4px;
      width: 100%;
      input {
        font-size: 15px;
        width: 100%;
      }
    }
    ul.ac__items {
      max-height: 10em;
      overflow-y: scroll;
      overflow-x: hidden;
      list-style-type: none;
      padding-left: 0;
      padding-right: 0;
      padding-bottom: 4px;
      li {
        cursor: default;
        font-size: 15px;
        white-space: nowrap;
        overflow-x: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-right: 2px;
        padding-left: 4px;
        &.ac--current {
          background-color: $orange-active;
          color: white;
        }
        &.ac--group {
          font-weight: bold;
        }
        &.ac--grouped {
          padding-left: 10px;
        }
      }
    }
  }
}

// For debugging
.pprint {
  margin-top: $marginS;
  padding: 4px;
  font-size: 12px;
  line-height: initial;
  border: 1px solid $red-dark;
  > .title {
    text-align: center;
    margin-top: -13px;
    > h4 {
      font-family: Consolas, "Lucida Console", monospace;
      display: inline-block;
      text-transform: uppercase;
      font-size: 10px;
      color: $red-dark;
      text-align: center;
      background-color: white;
      padding-left: 1em;
      padding-right: 1em;
    }}
  > .code {
    font-family: Consolas, "Lucida Console", monospace;
    white-space: pre-wrap;
  }
  > a {
    @include styled-input( none, none, none,
                           $text: $red-link, $hover-text: $red-hover,
                           $active-text: $red-active, $disabled-bg: none);
    float: right;
  }
}

// The default input width is browser specific and the dateinput
// especially does not play nicely with matti-grid.
.dateinput.dateinput--safe {
  max-width: 90%;
  &.warning {
    border-color: $negative;
  }
}

.neighbor-states {
  margin: 0;
  .tabby__row.neighbor > .tabby__cell {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
    &.property-id {
      white-space: nowrap;
    }
  }
}
