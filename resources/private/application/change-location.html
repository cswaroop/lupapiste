<!DOCTYPE html>
<html>
  <body>
    <section class="page" id="change-location" style="visibility: visible; display: block;">
      <div id="dialog-change-location" class="window autosized" >
        <div data-bind="with: changeLocationModel">
          <div class="dialog-header">
            <p data-bind="ltext: 'edit'"></p>
            <p class="dialog-close close lupicon-remove"></p>
          </div>

          <div class="dialog-content with-map">

            <div class="map-container">
              <div id="change-location-map" class="map map-large" style="width: 480px; height: 360px;"></div>
            </div>

            <div>
                <form data-bind="submit: saveNewLocation">
                    <div class="with-map-top">
                        <label class="form-label" data-bind ="ltext: 'newRequest.propertyId'"></label>
                        <input data-bind="textInput: propertyId, readonly: !lupapisteApp.models.currentUser.isAuthority()" data-test-id="application-new-propertyid"
                               type="text" maxlength="20" class="form-input text long" />

                        <label class="form-label" data-bind ="ltext: 'newRequest.address'"></label>
                        <input data-bind="textInput: address" data-test-id="application-new-address" type="text" maxlength="100" class="form-input text long" autofocus="autofocus"/>

                        <!-- ko if: isArchiveProject() -->
                        <div class="checkbox-wrapper">
                            <input type="checkbox" id="refreshBuildings" data-bind="checked: refreshBuildings">
                            <label id="refreshBuildings-label" for="refreshBuildings" class="checkbox-label" data-bind="ltext: 'newRequest.refreshBuildings'"></label>
                        </div>
                        <!-- /ko -->

                        <div data-bind="if: errorMessage" ><div data-bind="ltext: errorMessage" class="context-error"></div></div>
                    </div>
                    <div class="with-map-bottom">
                        <button type="submit" data-bind="click: saveNewLocation,
                                                         enable: ok,
                                                         disable: processing,
                                                         css: {waiting: pending}"
                                class="positive no-icon-pad btn-dialog"
                                data-test-id="change-location-save">
                            <span data-bind="ltext: 'save'"></span>

                            <i class="wait spin lupicon-refresh"></i>
                        </button>

                        <a data-bind="ltext: 'cancel'" class="btn-dialog close" href="#"></a>
                    </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </section>
  </body>
</html>
