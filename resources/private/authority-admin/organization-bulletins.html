<!DOCTYPE html>
<html>
  <body>
    <section class="page" id="organization-bulletins" >
      <navi-sidebar></navi-sidebar>
      <div class="container container--authority-admin"
           data-bind="css: lupapisteApp.services.naviSidebarService.containerCss">
        <!-- ko if: $root.bulletins.textsInitialized -->
        <section data-bind="with: $root.bulletins.texts">
          <h2 data-bind="ltext: 'auth-admin.local-bulletins-page-texts'"></h2>
          <table class="admin-settings-local-bulletins">
            <thead>
              <tr>
                <th data-bind="ltext: 'auth-admin.parameter'"></th>
                <th data-bind="ltext: 'in_fi'"></th>
                <th data-bind="ltext: 'in_sv'"></th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-bind="ltext: 'auth-admin.local-bulletins-page-texts.heading1'"></td>
                <td class="value">
                  <input type="text" data-bind="value: $data.fi.heading1"/>
                </td>
                <td class="value">
                  <input type="text" data-bind="value: $data.sv.heading1"/>
                </td>
              </tr>
              <tr>
                <td data-bind="ltext: 'auth-admin.local-bulletins-page-texts.heading2'"></td>
                <td class="value">
                  <input type="text" data-bind="value: $data.fi.heading2"/>
                </td>
                <td class="value">
                  <input type="text" data-bind="value: $data.sv.heading2"/>
                </td>
              </tr>
            </tbody>
          </table>

          <!-- ko foreach: loc.getSupportedLanguages() -->
          <!-- ko if: _.get($parent, $data) -->
          <h2 data-bind="ltext: 'auth-admin.local-bulletins-page-texts.caption-in-' + $data"></h2>
          <table class="admin-settings-local-bulletins">
            <tbody data-bind="foreach: _.get($parent, [$data, 'caption'])">
              <tr>
                <td class="value full-width">
                  <textarea data-bind="value: $data.text" /></td>
                <td>
                  <i class="lupicon-remove primary"
                     data-bind="click: $data.doRemove" />
                </td>
              </tr>
            </tbody>
          </table>
          <p><icon-button params="ltext: 'auth-admin.local-bulletins-page-texts.caption-add',
                               icon: 'circle-plus',
                               click: _.partial($root.bulletins.appendCaption, $data),
                               testId: 'add-row'"
                       data-bind="visible: true"></icon-button></p>
          <!-- /ko -->
          <!-- /ko -->
        </section>
        <!-- /ko -->
        <section>
          <h2 data-bind="ltext: 'auth-admin.bulletin-notification-emails'"></h2>
          <table class="admin-settings">
            <thead>
              <tr>
                <th data-bind="ltext: 'auth-admin.parameter'"></th>
                <th data-bind="ltext: 'auth-admin.value'"></th>
                <th data-bind="ltext: 'auth-admin.actions'"></th>
              </tr>
            </thead>
            <tbody data-bind="foreach: {data: $root.bulletins.scopes}">
              <tr data-bind="attr:{'data-test-type': $data.permitType}">
                <td data-bind="ltext: $data.permitType"></td>
                <td class="value">
                  <input type="text" data-bind="value: $data.notificationEmail"/>
                </td>
                <td>
                  <span>
                    [<a href="#" data-bind="click: $root.bulletins.saveScope, ltext: 'save'"
                        data-test-id="edit" class="modal"></a>]
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </div>
    </section>
  </body>
</html>
